"use strict";const getDataFromApi=()=>fetch("../../api/board.json").then((function(e){return e.json()}));export default{getDataFromApi:getDataFromApi};const modalElement=document.querySelector(".js-edit"),open=(e,t,a)=>{let r=e[a],n=r.cards[t];document.querySelector(".app-edit-title").value=n.title;let s=document.querySelector(".app-edit-textarea");s.value="",s.value=n.description;let i=n.tags;renderTags(i),document.querySelector(".js-edit-list-title").innerHTML=r.title},deleteCard=(e,t,a)=>{e[a].cards.splice(t,1);document.querySelector(".js-edit").classList.toggle("show")},renderTags=e=>{let t=document.querySelector(".js-edit-tags");t.innerHTML="";for(let a=0;a<e.length;a++){let r=document.createElement("span");r.setAttribute("class","badge badge-secondary bg-success"),r.innerHTML=e[a],t.appendChild(r)}},toggleEdit=e=>{e.stopPropagation(),document.querySelector(".js-edit").classList.toggle("show"),document.querySelector(".js-edit").classList.remove("d-none")},preventEditClosing=e=>{e.stopPropagation()};function createEvents(){document.querySelectorAll(".js-card, .js-edit-close").forEach(e=>{e.addEventListener("click",toggleEdit)}),document.querySelector(".js-edit-modal").addEventListener("click",preventEditClosing)}export{createEvents};export default{open:open,deleteCard:deleteCard};const mainFileContainer=document.querySelector(".app-board");function createHtmlFiltered(e){mainFileContainer.innerHTML="";for(let t=0;t<e.length;t++){let a=document.createElement("div");a.setAttribute("class","app-list"),a.setAttribute("id",t),mainFileContainer.appendChild(a);let r=document.createElement("div");r.setAttribute("class","p-1 rounded-sm bg-primary shadow"),a.appendChild(r);let n=document.createElement("form");n.setAttribute("class","app-list-form align-middle p-1 position-relative"),Object.assign(n,{id:[t]}),r.appendChild(n);let s=document.createElement("input");Object.assign(s,{className:"app-list-input form-control form-control-sm",placeholder:"Tareas importantes",type:"text",value:e[t].title,title:"Editar el título de la lista",id:`input-list-${t}`}),s.setAttribute("action","set-list-title"),n.appendChild(s);let i=document.createElement("div");i.setAttribute("class","app-list-options"),n.appendChild(i);let d=document.createElement("span");d.setAttribute("class","pl-2 pr-2 text-white-50 fas fa-ellipsis-v"),i.appendChild(d);let l=document.createElement("div");l.setAttribute("class","app-list-btns btn-group btn-group-sm"),i.appendChild(l);let o=document.createElement("button");Object.assign(o,{type:"button",className:"erase-list-btn btn btn-light text-muted border shadow-sm",title:"Borrar esta tarjeta",id:[t]}),o.setAttribute("action","erase-list-button"),l.appendChild(o);let c=document.createElement("span");c.setAttribute("class","fas fa-trash-alt"),o.appendChild(c);let p=document.createElement("button");p.setAttribute("class","btn btn-light text-muted border shadow-sm app-list-move-left"),Object.assign(p,{type:"button",title:"Mover esta lista hacia la izquierda"}),p.setAttribute("action","move-list-left"),l.appendChild(p);let u=document.createElement("span");u.setAttribute("class","fas fa-arrow-left"),p.appendChild(u);let m=document.createElement("button");m.setAttribute("class","btn btn-light text-muted border shadow-sm app-list-move-right"),Object.assign(m,{type:"button",title:"Mover esta lista hacia la derecha"}),m.setAttribute("action","move-list-right"),l.appendChild(m);let b=document.createElement("span");b.setAttribute("class","fas fa-arrow-right"),m.appendChild(b);for(let a=0;a<e[t].cards.length;a++){let n=e[t].cards[a],s=document.createElement("article");s.setAttribute("class","js-card js-open-card app-card m-1 mb-2 p-2 bg-white rounded-sm app-cursor-pointer shadow-sm"),s.setAttribute("id",e[t].cards[a].id),s.setAttribute("title","Abrir la tarjeta"),r.appendChild(s);let i=document.createElement("div");s.appendChild(i);for(let e=0;e<n.tags.length;e++){let t=document.createElement("span");t.setAttribute("class","badge badge-secondary bg-success"),t.innerHTML=n.tags[e],i.appendChild(t)}let d=document.createElement("div"),l=document.createElement("h3");l.setAttribute("class","h6");let o=document.createTextNode(n.title);l.appendChild(o),d.appendChild(l),s.appendChild(d);let c=document.createElement("div");c.setAttribute("class","text-black-50");let p=document.createElement("small");p.setAttribute("class","pr-2 fas fa-align-left");let u=document.createElement("small");u.setAttribute("class","far fa-check-square");let m=document.createElement("small");m.setAttribute("title","Subtareas completadas: 3 de 5");let b=document.createTextNode("Subtareas completadas: 3 de 5");m.appendChild(b),c.appendChild(p),c.appendChild(u),c.appendChild(m),s.appendChild(c);let h=document.createElement("div");h.setAttribute("class","app-card-btns btn-group-vertical btn-group-sm");let g=document.createElement("button");Object.assign(g,{type:"button",title:"Mover esta tarjeta hacia arriba"}),g.setAttribute("action","move-card-up"),g.setAttribute("class","btn btn-light text-muted border shadow-sm app-card-move-up");let f=document.createElement("span");f.setAttribute("class","fas fa-arrow-up"),g.appendChild(f);let C=document.createElement("button");Object.assign(C,{type:"button",className:"btn btn-light text-muted border shadow-sm app-card-move-down",title:"Mover esta tarjeta hacia abajo"}),C.setAttribute("action","move-card-down");let A=document.createElement("span");A.setAttribute("class","fas fa-arrow-down"),C.appendChild(A),h.appendChild(g),h.appendChild(C),s.appendChild(h)}let h=document.createElement("button");h.setAttribute("type","button"),h.setAttribute("class","ml-1 btn btn-primary btn-sm text-white-50 new-card-button"),h.setAttribute("title","Añadir una nueva tarjeta"),h.setAttribute("action","create-new-card"),h.setAttribute("id",[t]);let g=document.createElement("span");g.setAttribute("class","fas fa-plus");let f=document.createTextNode("Añadir otra tarjeta");g.appendChild(f),h.appendChild(g),r.appendChild(h)}}export default{createHtmlFiltered:createHtmlFiltered};import"./api.js";import"./menu.js";import api from"./api.js";import{createEvents}from"./edit.js";import state from"./state.js";import edit from"./edit.js";import filterMain from"./filterMain.js";import menu from"./menu.js";import newList from"./newList.js";const mainContainer=document.querySelector(".app-board");let infoArray=[],openCardId="",openCardListId="",filterText="";const startApp=()=>{if(null!=localStorage.getItem("lists")){let e=localStorage.getItem("lists");infoArray=JSON.parse(e),createHtml()}else api.getDataFromApi().then(e=>{for(let t=0;t<e.board.list.length;t++){const a=e.board.list[t];infoArray.push(a)}localStorage.setItem("lists",JSON.stringify(infoArray)),createHtml()})};function handleBoardEvents(e){const t=e.currentTarget,a=t.getAttribute("action"),r=t.getAttribute("id");"set-list-title"===a?state.handleListName(infoArray,r,e.currentTarget.value):"erase-list-button"===a?state.deleteListButton(infoArray,r):"move-list-left"===a?state.moveListLeft(infoArray,e.currentTarget.form.id):"move-list-right"===a?state.moveListRight(infoArray,e.currentTarget.form.id):"create-new-card"===a?state.createNewCard(infoArray,e.currentTarget.id,e.currentTarget):"move-card-up"===a?(state.moveCardUp(infoArray,e.currentTarget),e.stopPropagation()):"move-card-down"===a&&(state.moveCardDown(infoArray,e.currentTarget),e.stopPropagation()),localStorage.setItem("lists",JSON.stringify(infoArray)),createHtml()}function openCard(e){openCardId=parseInt(e.currentTarget.id);let t=e.currentTarget.parentNode.parentNode;openCardListId=parseInt(t.id);let a=state.getListIndex(infoArray,openCardListId),r=state.getCardIndex(infoArray,a,openCardId);edit.open(infoArray,r,a)}function handleDeleteCard(){let e=state.getCardIndex(infoArray,openCardListId,openCardId);edit.deleteCard(infoArray,e,openCardListId),localStorage.setItem("lists",JSON.stringify(infoArray)),createHtml()}function handleCardName(e){let t=e.currentTarget.value;state.changeCardName(infoArray,openCardListId,openCardId,t),localStorage.setItem("lists",JSON.stringify(infoArray))}function handleCardDescription(e){let t=e.currentTarget.value;state.changeCardDescription(infoArray,openCardListId,openCardId,t),localStorage.setItem("lists",JSON.stringify(infoArray))}function close(){createHtml()}function filterArray(){let e=state.filter(infoArray,filterText);filterMain.createHtmlFiltered(e),addEventListeners()}function handleFilter(e){filterText=e.currentTarget.value,filterArray()}function preventSubmitForm(e){e.preventDefault()}function handleOpenMenu(){menu.createMenu(infoArray)}function handleNewList(){newList.createNewList(infoArray),localStorage.setItem("lists",JSON.stringify(infoArray)),createHtml()}function createHtml(){mainContainer.innerHTML="";for(let e=0;e<infoArray.length;e++){let t=document.createElement("div");t.setAttribute("class","app-list"),t.setAttribute("id",infoArray[e].id),mainContainer.appendChild(t);let a=document.createElement("div");a.setAttribute("class","p-1 rounded-sm bg-primary shadow"),t.appendChild(a);let r=document.createElement("form");r.setAttribute("class","app-list-form align-middle p-1 position-relative"),Object.assign(r,{id:[e]}),a.appendChild(r);let n=document.createElement("input");Object.assign(n,{className:"app-list-input form-control form-control-sm",placeholder:"Tareas importantes",type:"text",value:infoArray[e].title,title:"Editar el título de la lista",id:infoArray[e].id}),n.setAttribute("action","set-list-title"),r.appendChild(n);let s=document.createElement("div");s.setAttribute("class","app-list-options"),r.appendChild(s);let i=document.createElement("span");i.setAttribute("class","pl-2 pr-2 text-white-50 fas fa-ellipsis-v"),s.appendChild(i);let d=document.createElement("div");d.setAttribute("class","app-list-btns btn-group btn-group-sm"),s.appendChild(d);let l=document.createElement("button");Object.assign(l,{type:"button",className:"erase-list-btn btn btn-light text-muted border shadow-sm",title:"Borrar esta tarjeta",id:[e]}),l.setAttribute("action","erase-list-button"),d.appendChild(l);let o=document.createElement("span");o.setAttribute("class","fas fa-trash-alt"),l.appendChild(o);let c=document.createElement("button");c.setAttribute("class","btn btn-light text-muted border shadow-sm app-list-move-left"),Object.assign(c,{type:"button",title:"Mover esta lista hacia la izquierda"}),c.setAttribute("action","move-list-left"),d.appendChild(c);let p=document.createElement("span");p.setAttribute("class","fas fa-arrow-left"),c.appendChild(p);let u=document.createElement("button");u.setAttribute("class","btn btn-light text-muted border shadow-sm app-list-move-right"),Object.assign(u,{type:"button",title:"Mover esta lista hacia la derecha"}),u.setAttribute("action","move-list-right"),d.appendChild(u);let m=document.createElement("span");m.setAttribute("class","fas fa-arrow-right"),u.appendChild(m);for(let t=0;t<infoArray[e].cards.length;t++){let r=infoArray[e].cards[t],n=document.createElement("article");n.setAttribute("class","js-card js-open-card app-card m-1 mb-2 p-2 bg-white rounded-sm app-cursor-pointer shadow-sm"),n.setAttribute("id",infoArray[e].cards[t].id),n.setAttribute("title","Abrir la tarjeta"),a.appendChild(n);let s=document.createElement("div");n.appendChild(s);for(let e=0;e<r.tags.length;e++){let t=document.createElement("span");t.setAttribute("class","badge badge-secondary bg-success"),t.innerHTML=r.tags[e],s.appendChild(t)}let i=document.createElement("div"),d=document.createElement("h3");d.setAttribute("class","h6");let l=document.createTextNode(r.title);d.appendChild(l),i.appendChild(d),n.appendChild(i);let o=document.createElement("div");o.setAttribute("class","text-black-50");let c=document.createElement("small");c.setAttribute("class","pr-2 fas fa-align-left");let p=document.createElement("small");p.setAttribute("class","far fa-check-square");let u=document.createElement("small");u.setAttribute("title","Subtareas completadas: 3 de 5");let m=document.createTextNode("Subtareas completadas: 3 de 5");u.appendChild(m),o.appendChild(c),o.appendChild(p),o.appendChild(u),n.appendChild(o);let b=document.createElement("div");b.setAttribute("class","app-card-btns btn-group-vertical btn-group-sm");let h=document.createElement("button");Object.assign(h,{type:"button",title:"Mover esta tarjeta hacia arriba"}),h.setAttribute("action","move-card-up"),h.setAttribute("class","btn btn-light text-muted border shadow-sm app-card-move-up");let g=document.createElement("span");g.setAttribute("class","fas fa-arrow-up"),h.appendChild(g);let f=document.createElement("button");Object.assign(f,{type:"button",className:"btn btn-light text-muted border shadow-sm app-card-move-down",title:"Mover esta tarjeta hacia abajo"}),f.setAttribute("action","move-card-down");let C=document.createElement("span");C.setAttribute("class","fas fa-arrow-down"),f.appendChild(C),b.appendChild(h),b.appendChild(f),n.appendChild(b)}let b=document.createElement("button");b.setAttribute("type","button"),b.setAttribute("class","ml-1 btn btn-primary btn-sm text-white-50 new-card-button"),b.setAttribute("title","Añadir una nueva tarjeta"),b.setAttribute("action","create-new-card"),b.setAttribute("id",infoArray[e].id);let h=document.createElement("span");h.setAttribute("class","fas fa-plus");let g=document.createTextNode("Añadir otra tarjeta");h.appendChild(g),b.appendChild(h),a.appendChild(b)}addEventListeners()}function addEventListeners(){createButtonNewColumn(),createEvents(),addEvents(".app-list-input","change",handleBoardEvents),addEvents(".erase-list-btn","click",handleBoardEvents),addEvents(".app-list-move-left","click",handleBoardEvents),addEvents(".app-list-move-right","click",handleBoardEvents),addEvents(".new-card-button","click",handleBoardEvents),addEvents(".app-card-move-up","click",handleBoardEvents),addEvents(".app-card-move-down","click",handleBoardEvents),addEvents(".js-open-card","click",openCard),addEvents(".js-edit-delete","click",handleDeleteCard),addEvents(".js-filter","keyup",handleFilter),addEvents(".js-submit","submit",preventSubmitForm),addEvents(".js-menu-btn","click",handleOpenMenu),addEvents(".new-list-btn","click",handleNewList),addEvents(".app-edit-title","change",handleCardName),addEvents(".app-edit-textarea","change",handleCardDescription),addEvents(".js-edit-close","click",close)}function createButtonNewColumn(){let e=document.createElement("div"),t=document.createElement("button");t.setAttribute("class","new-list-btn btn btn-light btn-outline-primary btn-sm mr-5 shadow-sm"),t.setAttribute("type","button"),t.setAttribute("title","Añadir nueva lista");let a=document.createElement("span");a.setAttribute("class","fas fa-plus"),t.appendChild(a),e.appendChild(t),mainContainer.appendChild(e)}function addEvents(e,t,a){const r=document.querySelectorAll(e);for(const e of r)e.addEventListener(t,a)}startApp();export{createHtml};export{createButtonNewColumn};let menuTagsContainer=document.querySelector(".js-menu-tags");function createMenu(e){menuTagsContainer.innerHTML="";let t=[];for(let a=0;a<e.length;a++)for(let r=0;r<e[a].cards.length;r++)for(let n=0;n<e[a].cards[r].tags.length;n++)t.push(e[a].cards[r].tags[n]);let a=new Set(t),r=[],n=[],s=[];for(let t=0;t<e.length;t++)for(let a=0;a<e[t].cards.length;a++)e[t].cards[a].tags.includes("JS")?r.push(e[t].cards[a].title):e[t].cards[a].tags.includes("Css")?n.push(e[t].cards[a].title):e[t].cards[a].tags.includes("Html")&&s.push(e[t].cards[a].title);a.forEach(e=>{let t=document.createElement("h6");t.setAttribute("class","h5");let a=document.createElement("span");a.setAttribute("class","badge badge-secondary bg-success");let r=document.createTextNode(e),n=document.createElement("ul");n.setAttribute("id",`${e}`),a.appendChild(r),t.appendChild(a),menuTagsContainer.appendChild(t),menuTagsContainer.appendChild(n)}),createTaskList("JS",r),createTaskList("Css",r),createTaskList("Html",r)}function createTaskList(e,t){let a=document.getElementById(e);for(const e of t){let t=document.createElement("li"),r=document.createElement("small"),n=document.createTextNode(`${e}`);r.appendChild(n),t.appendChild(r),a.appendChild(t)}}const toggleMenu=()=>{document.querySelector(".js-menu").classList.toggle("show")};document.querySelectorAll(".js-menu-btn").forEach(e=>{e.addEventListener("click",toggleMenu)});export default{createMenu:createMenu};const createNewList=e=>{const t={title:"Título tarjeta",id:getNewListId(),cards:[{id:getNewListId(),title:"Título de la tarea",description:"Lorem ipsum dolor sit amet",tags:["JS","Css","Html"]}]};e.push(t)},getNewListId=()=>Date.now();export default{createNewList:createNewList};const filter=(e,t)=>(t=t.toLowerCase(),e.map(e=>{const a={...e};return a.cards=a.cards.filter(e=>!0===e.title.toLowerCase().includes(t)),a})),handleListName=(e,t,a)=>{e[getListIndex(e,t)].title=a},deleteListButton=(e,t)=>{e.splice(t,1)},moveListLeft=(e,t)=>{let a=e.splice(t,1),r=parseInt(t)-1;e.splice(r,0,a[0])},moveListRight=(e,t)=>{let a=e.splice(t,1),r=parseInt(t)+1;e.splice(r,0,a[0])},createNewCard=(e,t,a)=>{let r=parseInt(t);e[getListIndex(e,r)].cards.push({id:getNewId(),title:"Nueva tarjeta",description:"Ponga aquí la descripción de la tarea",tags:["JS"]})},getNewId=()=>Date.now(),moveCardUp=(e,t)=>{let a=t.parentNode.parentNode,r=a.id,n=parseInt(r),s=a.parentNode.parentNode.id,i=getCardIndex(e,s,n),d=e[s].cards.splice(i,1);e[s].cards.splice(i-1,0,d[0])},moveCardDown=(e,t)=>{let a=t.parentNode.parentNode,r=a.id,n=parseInt(r),s=a.parentNode.parentNode.id,i=parseInt(s),d=getCardIndex(e,i,n),l=e[s].cards.splice(d,1);e[s].cards.splice(d+1,0,l[0])},changeCardName=(e,t,a,r)=>{let n=getListIndex(e,t),s=getCardIndex(e,n,a);e[n].cards[s].title=r},changeCardDescription=(e,t,a,r)=>{let n=getListIndex(e,t),s=getCardIndex(e,n,a);e[n].cards[s].description=r},getCardIndex=(e,t,a)=>{for(let r=0;r<e.length;r++){let r=e[t].cards.findIndex(e=>e.id===a);if(r>=0)return r}},getListIndex=(e,t)=>{for(let a=0;a<e.length;a++){let a=parseInt(t),r=e.findIndex(e=>e.id===a);if(r>=0)return r}};export default{handleListName:handleListName,deleteListButton:deleteListButton,moveListLeft:moveListLeft,moveListRight:moveListRight,createNewCard:createNewCard,moveCardUp:moveCardUp,moveCardDown:moveCardDown,getCardIndex:getCardIndex,getListIndex:getListIndex,changeCardName:changeCardName,changeCardDescription:changeCardDescription,filter:filter};